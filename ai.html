<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AI Chat Super</title>

<style>
:root{
  --bg:#0b141a; --glass:rgba(32,44,51,.65);
  --user:#005c4b; --ai:#1f2c34;
  --input:#111b21; --accent:#00a884;
  --text:#e9edef;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:var(--bg); color:var(--text); overflow:hidden;
  transition:background .3s, color .3s;
}

/* Header blur */
.header{
  position:sticky; top:0; z-index:10;
  height:56px; display:flex; align-items:center; justify-content:space-between;
  padding:0 16px; background:var(--glass);
  backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
  border-bottom:1px solid rgba(255,255,255,.06);
  font-weight:600;
}

.chat{
  height:calc(100% - 112px);
  padding:12px; overflow-y:auto; scroll-behavior:smooth;
}

.bubble{
  max-width:78%; padding:9px 13px; border-radius:10px;
  margin-bottom:6px; font-size:15px; line-height:1.4;
  animation:pop .25s ease;
}
@keyframes pop{from{opacity:0;transform:translateY(6px)}to{opacity:1}}

.user{background:var(--user); margin-left:auto; border-top-right-radius:3px}
.ai{background:var(--ai); margin-right:auto; border-top-left-radius:3px}

/* typing */
.typing{display:flex; gap:4px; width:44px}
.dot{width:6px;height:6px;border-radius:50%;background:#9aa2a7;animation:blink 1.4s infinite}
.dot:nth-child(2){animation-delay:.2s}
.dot:nth-child(3){animation-delay:.4s}
@keyframes blink{0%{opacity:.2}20%{opacity:1}100%{opacity:.2}}

/* Input */
.input{
  height:56px; display:flex; align-items:center; gap:10px;
  padding:8px; background:var(--input);
}
input{
  flex:1; border:none; outline:none; border-radius:20px;
  padding:10px 15px; background:#202c33; color:#fff; font-size:15px;
}
button{
  width:40px; height:40px; border:none; border-radius:50%;
  background:var(--accent); color:#000; font-size:18px;
  transition:.2s;
}
button:active{transform:scale(.9); opacity:.8}

/* Theme toggle */
.theme-btn{font-size:14px; padding:4px 8px; border-radius:6px; background:#2563eb; color:#fff; cursor:pointer; border:none;}
</style>
</head>

<body>
<div class="header">
  AI Chat ‚Ä¢ Offline
  <button class="theme-btn" onclick="toggleTheme()">üåô/‚òÄÔ∏è</button>
</div>

<div class="chat" id="chat"></div>

<div class="input">
  <input id="msg" placeholder="Ketik pesan..." onkeydown="if(event.key==='Enter')send()">
  <button onclick="send()">‚û§</button>
</div>

<script>
// HAPTIC HALUS
function hapticSoft(){ if(navigator.vibrate) navigator.vibrate([8,20,6]); }
function hapticSend(){ if(navigator.vibrate) navigator.vibrate(12); }
function hapticReply(){ if(navigator.vibrate) navigator.vibrate([10,30,10]); }

// HISTORY CHAT
const chatHistory=JSON.parse(localStorage.getItem('chatHistory')||'[]');
const chatContainer=document.getElementById('chat');
chatHistory.forEach(msg=>{ 
  chatContainer.innerHTML+=`<div class="bubble ${msg.type}">${msg.text}</div>`; 
});
chatContainer.scrollTop=chatContainer.scrollHeight;

// AI LOGIC (MTK + Coding)
function aiReply(text){
  text=text.toLowerCase().replace(/,/g,'.');

  // Ekspresi Matematika sederhana
  if(/^[0-9\.\+\-\*\/\(\) ]+$/.test(text)){
    try{return "Hasil: "+eval(text);}catch(e){}
  }
  // Luas / Keliling
  if(text.includes("luas persegi")) return "Luas = sisi √ó sisi";
  if(text.includes("keliling persegi")) return "Keliling = 4 √ó sisi";
  if(text.includes("luas persegi panjang")) return "Luas = panjang √ó lebar";
  if(text.includes("keliling persegi panjang")) return "Keliling = 2√ó(panjang+lebar)";
  if(text.includes("pythagoras")) return "a¬≤ + b¬≤ = c¬≤";

  // Coding
  if(text.includes("html")) return "HTML buat struktur web.";
  if(text.includes("css")) return "CSS untuk styling & layout.";
  if(text.includes("javascript")||text.includes("js")) return "JavaScript untuk logika & interaksi.";

  return "AI offline ü§ñ. Coba tanya MTK/coding dasar.";
}

// THEME SWITCH
let dark=true;
function toggleTheme(){
  dark=!dark;
  if(dark){
    document.body.style.background='var(--bg)';
    document.body.style.color='var(--text)';
  }else{
    document.body.style.background='#f1f1f1';
    document.body.style.color='#111';
  }
}

// SEND MESSAGE
function send(){
  const msgInput=document.getElementById('msg');
  if(!msgInput.value.trim()) return;
  const userText=msgInput.value;
  msgInput.value="";
  hapticSend();
  appendBubble(userText,'user');

  // Typing AI
  const typing=document.createElement('div');
  typing.className='bubble ai typing';
  typing.innerHTML='<div class="dot"></div><div class="dot"></div><div class="dot"></div>';
  chatContainer.appendChild(typing);
  chatContainer.scrollTop=chatContainer.scrollHeight;
  hapticSoft();

  setTimeout(()=>{
    typing.remove();
    const reply=aiReply(userText);
    appendBubble(reply,'ai');
    hapticReply();
  },1200);
}

function appendBubble(text,type){
  chatContainer.innerHTML+=`<div class="bubble ${type}">${text}</div>`;
  chatContainer.scrollTop=chatContainer.scrollHeight;
  // Save history
  chatHistory.push({text,type});
  localStorage.setItem('chatHistory',JSON.stringify(chatHistory));
}

// INIT WELCOME
if(chatHistory.length===0){
  appendBubble("Halo üëã Aku AI Offline. Bisa jawab MTK & Coding.",'ai');
}
</script>
</body>
</html> 